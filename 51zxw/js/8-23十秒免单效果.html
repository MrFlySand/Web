<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>8-23十秒免单效果</title>
		<style type="text/css">
			*{margin:0;padding:0;}
			.box{
				width:400px;height:50px;line-height:50px;margin:20px auto;
				font-size:50px;color:red;position:relative;
			}
			.point{
				width:100%;height:100%;text-align:center;
			}
			#minutes{
				width:100%;height:100%;text-align:center;
				position:absolute;top:0;left:-40px;letter-spacing:5px;/*文字间距*/
			}
			#seconds{
				width:100%;height:100%;text-align:center;
				position:absolute;top:0;left:40px;letter-spacing:5px;/*文字间距*/
			}
			#butt{
				width:100px;height:40px;display:block;/*转成块级元素*/margin:0 auto;/*auto溢出裁剪*/
			}
		</style>
	</head>
	<body>
		<div class="box">
			<div id="minutes">00</div>
			<div class="point">.</div>
			<!--<div id="seconds">00</div>-->
		</div>
		<button type="button" id="butt">点击开始</button>
		<script type="text/javascript">
			var butt=document.getElementById("butt");
			var minutes=document.getElementById("minutes");
			var seconds=document.getElementById("seconds");
			var m=0,s=0;
			var inter;
			function time(){
				m=m+0.01;
				s=s+10;
				if(m>15){
					clearInterval(inter);
					alert("时间已超时");
				}else{
					minutes.innerHTML=m;
					seconds.innerHTML=s;
				}
			}
//鼠标按下时执行的参数
			butt.onmousedown=function(){
				butt.innerHTML="松开暂时";
		//10毫秒后执行这个函数
				inter=setInterval(time,10)
			}
//鼠标松开时执行的函数
			butt.onmouseup =function(){
	//清除定时器
				clearInterval(inter);
				var p = Math.random()*10%3;
				if(m==10&&s==100&&p==1){
					alert("挑战成功");
				}else if(m==10&&s==100&&p!=1){
					minutes.innerHTML=10;
					//seconds.innerHTML=10;
					alert("挑战失败");
				}else{
					alert("挑战失败");
				}
			}
		</script>
	</body>
</html>
